setwd("C:/Users/guill/OneDrive/Documents/1 Master LDT/Programmation R/Projet_R_Git_c_de_la_merde/Projet R")
setwd("C:/Users/guill/OneDrive/Documents/1 Master LDT/Programmation R/Projet_R_Git_c_de_la_merde/Projet R")
setwd("C:/Users/guill/OneDrive/Documents/1 Master LDT/Programmation R/Projet_R_Git_c_de_la_merde/Projet_R")
# Load the DBI package
library(DBI)
library(tidyverse)
library(magrittr)
library(dplyr)
# Function to extract SQL commands from text files
read.sql <- function(file){
lines <- readLines(file) # Get all lines
merged_lines <- paste(lines, sep = "", collapse = "") # Merge for simplicity
sql_lines <- strsplit(merged_lines, ";") # Split according to ";" corresponding to sql line separator
vec_lines <- unlist(sql_lines) # List -> Vector
return(vec_lines)
}
# Create a RSQLite file called db.sqlite
con <- dbConnect(RSQLite::SQLite(), dbname = "db.sqlite")
# Create an ephemeral in-memory RSQLite database
# con <- dbConnect(RSQLite::SQLite(), dbname = ":memory:")
# Read the SQL instructions in table_scheme.sql
# This file *should* be build from the project description
table_queries <- read.sql("table_scheme_exemple.sql")
for(query in table_queries){
#Creates the tables
dbExecute(con, query)
}
# List the tables in the database
tables.names <- dbListTables(con)
### Tables are valid
files<-list.files(path="sql-data",full.names = TRUE)
sqlcomand<-lapply(files, FUN = readLines)%>%unlist()
lapply(sqlcomand, \(sql) dbSendQuery(con,sql))
# Read a table, resulting in a dataframe
dbReadTable(con, "animaux")
# Store all tables in dataframes
tables <- sapply(tables.names, dbReadTable, conn=con)
tables$velages
View(tables)
# Selectionne les id des parents
velages<-tables$velages
animaux_velages<-tables$animaux_velages
mere_ids<-velages$mere_id
pere_ids<-velages$pere_id
enfant_id<-animaux_velages$animal_id
animaux_types<-tables$animaux_types
#Check le type des parents en fonction de leurs id
mere_correspondance <- animaux_types %>%
filter(animal_id %in% mere_ids) %>%
select(animal_id, type_id)
pere_correspondance <- animaux_types %>%
filter(animal_id %in% pere_ids) %>%
select(animal_id, type_id)
# Affichage des correspondances
view(mere_correspondance)
view(pere_correspondance)
# Function to extract SQL commands from text files
read.sql <- function(file){
lines <- readLines(file) # Get all lines
merged_lines <- paste(lines, sep = "", collapse = "") # Merge for simplicity
sql_lines <- strsplit(merged_lines, ";") # Split according to ";" corresponding to sql line separator
vec_lines <- unlist(sql_lines) # List -> Vector
return(vec_lines)
}
# Create a RSQLite file called db.sqlite
con <- dbConnect(RSQLite::SQLite(), dbname = "db.sqlite")
# Create an ephemeral in-memory RSQLite database
# con <- dbConnect(RSQLite::SQLite(), dbname = ":memory:")
# Read the SQL instructions in table_scheme.sql
# This file *should* be build from the project description
table_queries <- read.sql("table_scheme_exemple.sql")
for(query in table_queries){
#Creates the tables
dbExecute(con, query)
}
# List the tables in the database
tables.names <- dbListTables(con)
### Tables are valid
files<-list.files(path="sql-data",full.names = TRUE)
sqlcomand<-lapply(files, FUN = readLines)%>%unlist()
lapply(sqlcomand, \(sql) dbSendQuery(con,sql))
# Read a table, resulting in a dataframe
dbReadTable(con, "animaux")
setwd("C:/Users/guill/OneDrive/Documents/1 Master LDT/Programmation R/Projet_R")
("C:/Users/guill/OneDrive/Documents/1 Master LDT/Programmation R/Projet_R")
wd
setwd("C:/Users/guill/OneDrive/Documents/1 Master LDT/Programmation R/Projet_R")
setwd("C:/Users/guill/OneDrive/Documents/1 Master LDT/Programmation R/Projet_R")
library(DBI)
library(tidyverse)
library(magrittr)
library(dplyr)
# Function to extract SQL commands from text files
read.sql <- function(file){
lines <- readLines(file) # Get all lines
merged_lines <- paste(lines, sep = "", collapse = "") # Merge for simplicity
sql_lines <- strsplit(merged_lines, ";") # Split according to ";" corresponding to sql line separator
vec_lines <- unlist(sql_lines) # List -> Vector
return(vec_lines)
}
# Create a RSQLite file called db.sqlite
con <- dbConnect(RSQLite::SQLite(), dbname = "db.sqlite")
# Create an ephemeral in-memory RSQLite database
# con <- dbConnect(RSQLite::SQLite(), dbname = ":memory:")
# Read the SQL instructions in table_scheme.sql
# This file *should* be build from the project description
table_queries <- read.sql("table_scheme_exemple.sql")
for(query in table_queries){
#Creates the tables
dbExecute(con, query)
}
# List the tables in the database
tables.names <- dbListTables(con)
### Tables are valid
files<-list.files(path="sql-data",full.names = TRUE)
sqlcomand<-lapply(files, FUN = readLines)%>%unlist()
lapply(sqlcomand, \(sql) dbSendQuery(con,sql))
dbReadTable(con, "animaux")
